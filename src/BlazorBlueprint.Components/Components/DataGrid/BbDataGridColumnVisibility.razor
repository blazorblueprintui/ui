@namespace BlazorBlueprint.Components
@typeparam TData where TData : class

<BbDropdownMenu>
    <BbDropdownMenuTrigger AsChild="@AsChild" Class="@TriggerClass">
        @if (TriggerContent != null)
        {
            @TriggerContent
        }
        else
        {
            <BbButton Variant="ButtonVariant.Outline" Size="ButtonSize.Small">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                     fill="none" stroke="currentColor" stroke-width="2"
                     stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
                    <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                    <line x1="3" x2="21" y1="9" y2="9" />
                    <line x1="3" x2="21" y1="15" y2="15" />
                    <line x1="9" x2="9" y1="3" y2="21" />
                    <line x1="15" x2="15" y1="3" y2="21" />
                </svg>
                Columns
            </BbButton>
        }
    </BbDropdownMenuTrigger>
    <BbDropdownMenuContent Align="PopoverAlign.End">
        <BbDropdownMenuLabel>Toggle columns</BbDropdownMenuLabel>
        <BbDropdownMenuSeparator />
        @foreach (var column in GetHideableColumns())
        {
            var columnId = column.ColumnId;
            var isVisible = ParentGrid!.EffectiveState.Columns.IsVisible(columnId);
            <BbDropdownMenuCheckboxItem
                Checked="@isVisible"
                CheckedChanged="@((bool v) => HandleVisibilityChanged(columnId, v))">
                @(column.Title ?? columnId)
            </BbDropdownMenuCheckboxItem>
        }
    </BbDropdownMenuContent>
</BbDropdownMenu>
