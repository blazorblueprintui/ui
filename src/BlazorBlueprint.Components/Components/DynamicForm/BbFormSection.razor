@namespace BlazorBlueprint.Components

<div data-slot="form-section" class="@SectionCssClass">
    @if (ShowSeparator)
    {
        <BbSeparator />
    }

    @if (Collapsible)
    {
        <BbCollapsible Open="@isExpanded" OpenChanged="@(v => isExpanded = v)">
            <div class="flex items-center justify-between">
                @if (Title is not null || Description is not null)
                {
                    <div class="space-y-1">
                        @if (Title is not null)
                        {
                            <h3 class="text-base font-medium">@Title</h3>
                        }
                        @if (Description is not null)
                        {
                            <p class="text-sm text-muted-foreground">@Description</p>
                        }
                    </div>
                }
                <BbCollapsibleTrigger>
                    <BbButton Variant="ButtonVariant.Ghost" Size="ButtonSize.Small">
                        @if (isExpanded)
                        {
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
                        }
                        else
                        {
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
                        }
                    </BbButton>
                </BbCollapsibleTrigger>
            </div>
            <BbCollapsibleContent>
                @ChildContent
            </BbCollapsibleContent>
        </BbCollapsible>
    }
    else
    {
        @if (Title is not null || Description is not null)
        {
            <div class="space-y-1">
                @if (Title is not null)
                {
                    <h3 class="text-base font-medium">@Title</h3>
                }
                @if (Description is not null)
                {
                    <p class="text-sm text-muted-foreground">@Description</p>
                }
            </div>
        }

        @ChildContent
    }
</div>
