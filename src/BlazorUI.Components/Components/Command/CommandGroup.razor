@namespace BlazorUI.Components.Command

<div class="@CssClass"
     role="group"
     aria-labelledby="@(string.IsNullOrWhiteSpace(Heading) ? null : $"command-group-{Id}")">
    @if (!string.IsNullOrWhiteSpace(Heading))
    {
        <div id="@($"command-group-{Id}")"
             class="px-2 py-1.5 text-xs font-medium text-muted-foreground">
            @Heading
        </div>
    }
    @ChildContent
</div>

@code {
    /// <summary>
    /// Gets or sets additional CSS classes to apply to the group container.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Gets or sets the heading text for this group (optional).
    /// </summary>
    [Parameter]
    public string? Heading { get; set; }

    /// <summary>
    /// Gets or sets the content to be rendered inside the group.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Gets the unique identifier for this group.
    /// </summary>
    private string Id { get; } = Guid.NewGuid().ToString("N");

    /// <summary>
    /// Gets the computed CSS classes for the group container.
    /// </summary>
    private string CssClass
    {
        get
        {
            var baseClasses = "overflow-hidden p-1 text-foreground [&_[data-command-group-heading]]:px-2 [&_[data-command-group-heading]]:py-1.5 [&_[data-command-group-heading]]:text-xs [&_[data-command-group-heading]]:font-medium [&_[data-command-group-heading]]:text-muted-foreground";
            return string.IsNullOrWhiteSpace(Class) ? baseClasses : $"{baseClasses} {Class}";
        }
    }
}
