@* Only GridTemplate is set â€” the view locks into grid mode with no toggle.
   EnableInfiniteScroll + ScrollHeight auto-loads more cards as the user scrolls.
   InitialPageSize=6 is a multiple of LCM(2,3)=6, keeping every row complete
   at both the sm:grid-cols-2 and lg:grid-cols-3 breakpoints. *@
<BbDataView TItem="Product" Data="@products"
            EnableInfiniteScroll="true" ScrollHeight="600px" InitialPageSize="6">
    <GridTemplate Context="product">
        <BbCard Class="overflow-hidden flex flex-col hover:shadow-md transition-shadow">
            <div class="relative aspect-square overflow-hidden bg-muted">
                <img src="@product.ImageUrl" alt="@product.Name"
                     class="object-cover w-full h-full" loading="lazy" />
                @if (product.Stock == 0)
                {
                    <div class="absolute inset-0 bg-background/70 flex items-center justify-center">
                        <BbTypographyMuted>Out of Stock</BbTypographyMuted>
                    </div>
                }
            </div>
            <BbCardHeader>
                <div class="flex items-start justify-between gap-2">
                    <BbCardTitle Class="text-base line-clamp-2 leading-snug">@product.Name</BbCardTitle>
                    <BbBadge Variant="BadgeVariant.Outline" Class="shrink-0 text-xs mt-0.5">@product.Category</BbBadge>
                </div>
            </BbCardHeader>
            <BbCardContent>
                <BbRating Value="@product.Rating" ReadOnly="true" Size="RatingSize.Small" />
            </BbCardContent>
            <BbCardFooter Class="justify-between">
                <span class="text-base font-bold">$@product.Price.ToString("F2")</span>
                <BbButton Size="ButtonSize.Small"
                          Variant="@(product.Stock > 0 ? ButtonVariant.Default : ButtonVariant.Outline)"
                          Disabled="@(product.Stock == 0)">
                    @(product.Stock > 0 ? "Add to Cart" : "Notify Me")
                </BbButton>
            </BbCardFooter>
        </BbCard>
    </GridTemplate>
    <Fields>
        <BbDataViewColumn TItem="Product" TValue="string"  Property="@(p => p.Name)"     Header="Name"     Sortable Filterable />
        <BbDataViewColumn TItem="Product" TValue="string"  Property="@(p => p.Category)" Header="Category" Sortable Filterable />
        <BbDataViewColumn TItem="Product" TValue="decimal" Property="@(p => p.Price)"    Header="Price"    Sortable />
        <BbDataViewColumn TItem="Product" TValue="double"  Property="@(p => p.Rating)"   Header="Rating"   Sortable />
    </Fields>
</BbDataView>
